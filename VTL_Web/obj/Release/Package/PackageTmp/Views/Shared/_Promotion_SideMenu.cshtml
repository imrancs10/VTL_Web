@using UPPRB_Web.Models.Masters;

@{
    @model IEnumerable<PromotionModel>
    int index = 1;
}

<aside>
    <a>
        <svg version="1.1" id="nav-btn" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
        <path id="list-view-icon" d="M462,108.857H50V50h412V108.857z M462,167.714H50v58.857h412V167.714z M462,285.429H50v58.857h412
   V285.429z M462,403.143H50V462h412V403.143z" />
  </svg>
    </a>

    <h4 class="text-blue">UPPRPB</h4>

    <nav1 class="show  pt-2 pl-0 min-vh-100" id="sidebar">
        <ul class="nav w-bor-r flex-column flex-nowrap overflow-hidden">
            <li class="nav-item colorchange text-blue">
                @DisplayTree(Model.Where(e => e.Parent_Id == null).OrderBy(e => e.Id), index)
                @helper DisplayTree(IEnumerable<PromotionModel> promotion, int index)
                {
                    if (index == 1)
                    {

                        <div class="expand" id="submenu1sub@(index)" aria-expanded="true">
                            <ul class="nav flex-column flex-nowrap overflow-hidden">

                                @foreach (var element in promotion)
                                {
                                    <li class="nav-item colorchange text-blue">
                                        @{
                                            index = index + 1;
                                            var children = Model.Where(e => e.Parent_Id == element.Id).OrderBy(e => e.Id);
                                        }

                                        @if (children.Count() > 0)
                                        {
                                            <a class="nav-link collapsed py-1" href="#submenu1sub@(index)" data-toggle="collapse" data-target="#submenu1sub@(index)">@element.Subject</a>
                                            @DisplayTree(children, index)
                                        }
                                        else
                                        {
                                            <a class="  nav-link text-truncate" href="/Home/Promotion?promotionId=@element.Id">
                                                @element.Subject
                                            </a>
                                        }
                                    </li>
                                }
                            </ul>
                        </div>
                    }
                    else
                    {
                        <div class="collapse" id="submenu1sub@(index)" aria-expanded="false">
                            <ul class="nav flex-column flex-nowrap overflow-hidden">

                                @foreach (var element in promotion)
                                {
                                    <li class="nav-item colorchange text-blue">
                                        @{
                                            index = index + 1;
                                            var children = Model.Where(e => e.Parent_Id == element.Id).OrderBy(e => e.Id);
                                        }
                                        @if (children.Count() > 0)
                                        {
                                            <a class=" nav-link collapsed py-1" href="#submenu1sub@(index)" data-toggle="collapse" data-target="#submenu1sub@(index)">@element.Subject</a>
                                            @DisplayTree(children, index)
                                        }
                                        else
                                        {
                                            <a class="nav-link text-truncate" href="/Home/Promotion?promotionId=@element.Id">
                                                @element.Subject
                                            </a>
                                        }
                                    </li>
                                }
                            </ul>
                        </div>
                    }
                }
            </li>
        </ul>
    </nav1>
</aside>


@*<div class="col-lg-2 pl-md-0 pr-md-0 w-bor-r  pb-50">
    <h2 class="w-bgph ">UPPRPB</h2>
    <div class="collapse show  pt-2 pl-0 min-vh-100" id="sidebar" style="min-height:500px">
        <ul class="nav flex-column flex-nowrap overflow-hidden">
            <li>
                @DisplayTree(Model.Where(e => e.Parent_Id == null).OrderBy(e => e.Id), index)
                @helper DisplayTree(IEnumerable<PromotionModel> promotion, int index)
                {
                    if (index == 1)
                    {
                        <div class="expand" id="submenu1sub@(index)" aria-expanded="true">
                            <ul class="flex-column nav pl-4" style="padding-left: 0px !important;">
                                @foreach (var element in promotion)
                                {
                                    <li class="nav-item">
                                        @{
                                            index = index + 1;
                                            var children = Model.Where(e => e.Parent_Id == element.Id).OrderBy(e => e.Id);
                                        }

                                        @if (children.Count() > 0)
                                        {
                                            <a class="nav-link collapsed py-1" href="#submenu1sub@(index)" data-toggle="collapse" data-target="#submenu1sub@(index)">@element.Subject</a>
                                            @DisplayTree(children, index)
                                        }
                                        else
                                        {
                                            <a class="nav-link text-truncate" href="/Home/Promotion?promotionId=@element.Id">
                                                @element.Subject
                                            </a>
                                        }
                                    </li>
                                }
                            </ul>
                        </div>
                    }
                    else
                    {
                        <div class="collapse" id="submenu1sub@(index)" aria-expanded="false">
                            <ul class="flex-column nav pl-4" style="padding-left: 0px !important;">
                                @foreach (var element in promotion)
                                {
                                    <li class="nav-item">
                                        @{
                                            index = index + 1;
                                            var children = Model.Where(e => e.Parent_Id == element.Id).OrderBy(e => e.Id);
                                        }
                                        @if (children.Count() > 0)
                                        {
                                            <a class="nav-link collapsed py-1" href="#submenu1sub@(index)" data-toggle="collapse" data-target="#submenu1sub@(index)">@element.Subject</a>
                                            @DisplayTree(children, index)
                                        }
                                        else
                                        {
                                            <a class="nav-link text-truncate" href="/Home/Promotion?promotionId=@element.Id">
                                                @element.Subject
                                            </a>
                                        }
                                    </li>
                                }
                            </ul>
                        </div>
                    }

                }
            </li>
        </ul>
    </div>
</div>*@